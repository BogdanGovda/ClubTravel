import{_ as y}from"./main2.js";/* empty css       *//* empty css          */import{N as j,P as D}from"./pagination2.js";import{Swiper as E}from"./swiper.js";import{A as Y}from"./variables.js";import{b as J}from"./api.js";import"./utils.js";async function _(){const c=localStorage.getItem("jwt");if(!c)return console.error("JWT отсутствует"),[];try{return await J(`${Y.BASE_URL}/api/orders?populate=*`,{headers:{Authorization:`Bearer ${c}`,"Content-Type":"application/json"}})}catch(s){console.error("Error fetching profile:",s)}}function G(c={}){const f=(t=>{if(typeof atob=="function"&&typeof TextDecoder<"u"){const o=atob(t),g=new Uint8Array(o.length);for(let a=0;a<o.length;a++)g[a]=o.charCodeAt(a);return new TextDecoder("utf-8").decode(g)}if(typeof Buffer<"u")return Buffer.from(t,"base64").toString("utf-8");const e=atob(t);try{return decodeURIComponent(escape(e))}catch{return e}})("PGRpdj4NCiAgPGRpdiBjbGFzcz0icHJvZmlsZV9fb3JkZXItY2FyZCI+DQogICAgPGRpdiBjbGFzcz0icHJvZmlsZV9fbGlzdC1udW1iZXIiPjxwPnt7b3JkZXJOdW1iZXJ9fTwvcD48L2Rpdj4NCiAgICA8ZGl2IGNsYXNzPSJwcm9maWxlX19saXN0LXByaWNlIj48cD57e29yZGVyUHJpY2V9fTwvcD48L2Rpdj4NCiAgICA8ZGl2IGNsYXNzPSJwcm9maWxlX19saXN0LWVtYWlsIj48cD57e29yZGVyRW1haWx9fTwvcD48L2Rpdj4NCiAgICA8ZGl2IGNsYXNzPSJwcm9maWxlX19saXN0LXN0YXR1cyB7e3N0YXR1c0NsYXNzfX0iPjxwPnt7b3JkZXJTdGF0dXN9fTwvcD48L2Rpdj4NCiAgICA8ZGl2IGNsYXNzPSJwcm9maWxlX19saXN0LWRhdGEiPjxwPnt7b3JkZXJEYXRlfX08L3A+PC9kaXY+DQogIDwvZGl2Pg0KDQogIDxkaXYgY2xhc3M9InByb2ZpbGVfX29yZGVyLWNhcmQgcHJvZmlsZV9fb3JkZXItY2FyZC0tbW9iIj4NCiAgICA8ZGl2IGNsYXNzPSJwcm9maWxlX19vcmRlci1oZWFkZXIgcHJvZmlsZV9fb3JkZXItaGVhZGVyLS1tb2IiPg0KICAgICAgPGRpdiBjbGFzcz0icHJvZmlsZV9fb3JkZXItbnVtYmVyIj48cD7QndC+0LzQtdGAINC30LDQutCw0LfQsDwvcD48L2Rpdj4NCiAgICAgIDxkaXYgY2xhc3M9InByb2ZpbGVfX29yZGVyLXByaWNlIj48cD7QodGD0LzQvNCwPC9wPjwvZGl2Pg0KICAgICAgPGRpdiBjbGFzcz0icHJvZmlsZV9fb3JkZXItZW1haWwiPjxwPkUtbWFpbDwvcD48L2Rpdj4NCiAgICAgIDxkaXYgY2xhc3M9InByb2ZpbGVfX29yZGVyLXN0YXR1cyI+PHA+Q9GC0LDRgtGD0YE8L3A+PC9kaXY+DQogICAgICA8ZGl2IGNsYXNzPSJwcm9maWxlX19vcmRlci1kYXRhIj48cD7QlNCw0YLQsDwvcD48L2Rpdj4NCiAgICA8L2Rpdj4NCiAgICA8ZGl2IGNsYXNzPSJwcm9maWxlX19vcmRlci1pbmZvLS1tb2IiPg0KICAgICAgPGRpdiBjbGFzcz0icHJvZmlsZV9fbGlzdC1udW1iZXIiPjxwPnt7b3JkZXJOdW1iZXJ9fTwvcD48L2Rpdj4NCiAgICAgIDxkaXYgY2xhc3M9InByb2ZpbGVfX2xpc3QtcHJpY2UiPjxwPnt7b3JkZXJQcmljZX19PC9wPjwvZGl2Pg0KICAgICAgPGRpdiBjbGFzcz0icHJvZmlsZV9fbGlzdC1lbWFpbCI+PHA+e3tvcmRlckVtYWlsfX08L3A+PC9kaXY+DQogICAgICA8ZGl2IGNsYXNzPSJwcm9maWxlX19saXN0LXN0YXR1cyB7e3N0YXR1c0NsYXNzfX0iPjxwPnt7b3JkZXJTdGF0dXN9fTwvcD48L2Rpdj4NCiAgICAgIDxkaXYgY2xhc3M9InByb2ZpbGVfX2xpc3QtZGF0YSI+PHA+e3tvcmRlckRhdGV9fTwvcD48L2Rpdj4NCiAgICA8L2Rpdj4NCiAgPC9kaXY+DQo8L2Rpdj4NCg==");let l={...c};const A="{",i="}",r=A+A,n=i+i;function C(t){let e=f,o=10,g=0;for(;g<o&&e.indexOf(r+"#if")!==-1;)g++,e=e.replace(new RegExp(`${r}#if\\s+([^}]+?)${n}([\\s\\S]*?)${r}else\\s*${n}([\\s\\S]*?)${r}\\/if\\s*${n}`,"g"),(a,u,I,X)=>t[u.trim()]?I:X),e=e.replace(new RegExp(`${r}#if\\s+([^}]+?)${n}([\\s\\S]*?)${r}\\/if\\s*${n}`,"g"),(a,u,I)=>t[u.trim()]?I:""),e=e.replace(new RegExp(`${r}#if\\s*\\((eq\\s+([^\\s]+)\\s+"([^"]+)"\\s*)\\)${n}([\\s\\S]*?)${r}else\\s*${n}([\\s\\S]*?)${r}\\/if\\s*${n}`,"g"),(a,u,I,X,b,h)=>t[I]===X?b:h),e=e.replace(new RegExp(`${r}#if\\s*\\((eq\\s+([^\\s]+)\\s+"([^"]+)"\\s*)\\)${n}([\\s\\S]*?)${r}\\/if\\s*${n}`,"g"),(a,u,I,X,b)=>t[I]===X?b:"");return Object.keys(t).forEach(a=>{const u=new RegExp(`${r}\\s*${a}\\s*${n}`,"g");e=e.replace(u,t[a]??"")}),e=e.replace(/\s[a-zA-Z0-9_-]+=['"]\s*['"]/g,""),e=e.replace(new RegExp(`${r}[^}]+?${n}`,"g"),""),e}function p(t){const e=C(t),o=document.createElement("div");return o.innerHTML=e.trim(),o.firstElementChild}let d=p(l);const m={};function S(t){if(l={...l,...t},d.parentElement){const e=d.parentElement,o=p(l);return Object.keys(m).forEach(g=>o[g]=m[g]),e.replaceChild(o,d),d=o,o}else{const e=p(l);return Object.keys(m).forEach(o=>e[o]=m[o]),d=e,e}}return m.update=S,m.toString=()=>d?.outerHTML??"",m.render=t=>(t&&t.appendChild&&t.appendChild(d),d),Object.keys(m).forEach(t=>d[t]=m[t]),d}document.querySelector('[data-component="profile"]')&&(y(()=>Promise.resolve({}),[]),y(()=>Promise.resolve({}),[]));let N=null;function k(){const c=document.querySelector(".mySwiperProfile"),s=document.getElementById("current"),f=document.getElementById("total");c&&(N=new E(".mySwiperProfile",{on:{init(l){f.textContent=l.slides.length,s.textContent=l.realIndex+1},slideChange(l){s.textContent=l.realIndex+1}},modules:[j,D],loop:c.querySelectorAll(".swiper-slide").length>1,slidesPerView:1,spaceBetween:25,navigation:{nextEl:".swiper__profile-next",prevEl:".swiper__profile-prev"},pagination:{el:".swiper-pagination",clickable:!0}})),window.mySwiperProfile=N}k();const P=await _()||[];function z(){const c=document.querySelector(".profile__order-render"),s=document.querySelector(".profile__order-render--next");if(!c)return;const f=P.slice(0,9),l=P.slice(9,18),A=document.querySelector(".profile__items-length");N.on("slideChange",()=>{const i=N.realIndex+1;A.innerHTML=`
  Показано ${i===1?f.length:P.length} из ${P.length}
  `}),f.forEach(i=>{const r=i.orderStatus,n=r?"оплачено":"в обработке",C=r?"paid":"processing",p=G({orderNumber:i.orderNumber,orderPrice:i.orderPrice+".00",orderStatus:n,statusClass:C,orderDate:i.orderDate});c.insertAdjacentHTML("beforeend",p)}),l.forEach(i=>{const r=i.orderStatus,n=r?"оплачено":"в обработке",C=r?"paid":"processing",p=G({orderNumber:i.orderNumber,orderPrice:i.orderPrice+".00",orderStatus:n,statusClass:C,orderDate:i.orderDate});s.insertAdjacentHTML("beforeend",p)})}z();const x=document.getElementById("avatar"),w=document.getElementById("preview"),Z=document.querySelector(".profile__political");function V(){w.getAttribute("src")?Z.classList.remove("margin"):Z.classList.add("margin")}x.addEventListener("change",()=>{const c=x.files[0];if(!c)return;const s=new FileReader;s.onload=()=>{const f=s.result;localStorage.setItem("avatar",f),w.src=f,w.style.display="block",Z.classList.remove("margin")},s.readAsDataURL(c)});const L=localStorage.getItem("avatar");L&&(w.src=L,w.style.display="block");const B=document.querySelector(".profile__username"),$=document.querySelectorAll(".profile__list-email"),v=localStorage.getItem("username"),W=document.querySelector(".profile__logout");function R(){return localStorage.getItem("Logged")==="true"}W.addEventListener("click",()=>{R()&&(localStorage.removeItem("Logged"),localStorage.removeItem("username"),localStorage.removeItem("jwt"),localStorage.removeItem("token"),window.location.reload()),R()||window.location.replace("/ClubTravel/html/pages/authorization.html?tab=authorization")});B.textContent=v.split("@")[0];$.forEach(c=>c.textContent=v);V();export{N as mySwiperProfile,z as renderOffer,k as sliderInit};
